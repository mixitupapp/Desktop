<UserControl
    x:Class="MixItUp.WPF.Controls.NotificationCenterControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Controls="clr-namespace:MixItUp.WPF.Controls"
    xmlns:MaterialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:resx="clr-namespace:MixItUp.Base;assembly=MixItUp.Base"
    Width="444"
    FontFamily="{MaterialDesign:MaterialDesignFont}"
    mc:Ignorable="d">
    <Border
        Background="{DynamicResource MaterialDesignPaper}"
        BorderBrush="{DynamicResource MaterialDesignDivider}"
        BorderThickness="1"
        CornerRadius="8">
        <Border.Effect>
            <DropShadowEffect
                BlurRadius="20"
                Direction="270"
                Opacity="0.3"
                ShadowDepth="5"
                Color="Black" />
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Border
                Grid.Row="0"
                Padding="16,12"
                Background="{DynamicResource PrimaryHueMidBrush}"
                BorderBrush="{DynamicResource MaterialDesignDivider}"
                BorderThickness="0,0,0,1"
                CornerRadius="8,8,0,0">
                <TextBlock
                    FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{DynamicResource MaterialDesign.Brush.Foreground}"
                    Text="Notifications" />
            </Border>

            <ScrollViewer
                Grid.Row="1"
                MaxHeight="500"
                VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="NotificationsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border
                                Background="{Binding Background}"
                                BorderBrush="{DynamicResource MaterialDesignDivider}"
                                BorderThickness="0,0,0,1"
                                Cursor="Hand"
                                MouseEnter="NotificationItem_MouseEnter"
                                MouseLeave="NotificationItem_MouseLeave">
                                <Grid Margin="16,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <MaterialDesign:PackIcon
                                        Grid.Column="0"
                                        Width="24"
                                        Height="24"
                                        Margin="0,0,12,0"
                                        VerticalAlignment="Center"
                                        Foreground="{Binding IconColor}"
                                        Kind="{Binding Icon}" />

                                    <StackPanel Grid.Column="1">
                                        <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                            <MaterialDesign:PackIcon
                                                Width="14"
                                                Height="14"
                                                Margin="0,1,1,0"
                                                VerticalAlignment="Center"
                                                Foreground="#DAA520"
                                                Kind="Pin"
                                                Visibility="{Binding PinVisibility}" />

                                            <TextBlock
                                                FontWeight="SemiBold"
                                                Foreground="{DynamicResource MaterialDesign.Brush.Primary}"
                                                Text="{Binding Title}"
                                                TextWrapping="Wrap" />
                                        </StackPanel>
                                        <TextBlock
                                            Margin="0,4,0,0"
                                            Foreground="{DynamicResource MaterialDesign.Brush.Foreground}"
                                            Text="{Binding Message}"
                                            TextWrapping="Wrap" />
                                        <Grid Margin="0,6,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock
                                                Grid.Column="0"
                                                FontSize="11"
                                                Foreground="{DynamicResource MaterialDesignBodyLight}"
                                                Text="{Binding TimeAgo}" />

                                            <StackPanel
                                                Grid.Column="1"
                                                Cursor="Hand"
                                                MouseLeftButtonUp="LinkText_Click"
                                                Orientation="Horizontal"
                                                Visibility="{Binding LinkVisibility}">
                                                <MaterialDesign:PackIcon
                                                    Width="11"
                                                    Height="11"
                                                    Margin="0,0,4,0"
                                                    VerticalAlignment="Center"
                                                    Foreground="{DynamicResource MaterialDesign.Brush.Primary}"
                                                    Kind="OpenInNew" />
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource MaterialDesign.Brush.Primary}"
                                                    Text="{x:Static resx:Resources.GoToLink}"
                                                    TextDecorations="Underline" />
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

        </Grid>
    </Border>
</UserControl>