<local:MainControlBase
    x:Class="MixItUp.WPF.Controls.MainControls.UsersControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Controls="clr-namespace:MixItUp.WPF.Controls"
    xmlns:MaterialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:System="clr-namespace:System;assembly=System.Runtime"
    xmlns:Util="clr-namespace:MixItUp.WPF.Util"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:MixItUp.WPF.Controls.MainControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:resx="clr-namespace:MixItUp.Base;assembly=MixItUp.Base"
    d:DesignHeight="700"
    d:DesignWidth="600"
    FontFamily="{MaterialDesign:MaterialDesignFont}"
    TextElement.FontSize="14"
    TextElement.FontWeight="Medium"
    mc:Ignorable="d">
    <local:MainControlBase.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <Util:LocalizationConverter x:Key="LocalizationConverter" />
    </local:MainControlBase.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="10" />
            <RowDefinition Height="*" />
            <RowDefinition Height="10" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid
            Grid.Row="0"
            Margin="0,0,0,10"
            HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <ComboBox
                Grid.Column="0"
                Width="100"
                Margin="0,3,0,0"
                MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.Platform}"
                ItemsSource="{Binding Platforms}"
                SelectedItem="{Binding SelectedPlatform}"
                Style="{StaticResource MaterialDesignFloatingHintComboBox}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Converter={StaticResource LocalizationConverter}}" />
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <TextBox
                x:Name="UsernameFilterTextBox"
                Grid.Column="2"
                Width="150"
                MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.Username}"
                Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                TextChanged="UsernameFilterTextBox_TextChanged" />

            <Border Grid.Column="4" Style="{StaticResource DefaultBorder}" />

            <ComboBox
                Grid.Column="6"
                Width="150"
                Margin="0,3,0,0"
                MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.FilterType}"
                ItemsSource="{Binding SearchFilterTypes}"
                SelectedItem="{Binding SelectedSearchFilterType}"
                Style="{StaticResource MaterialDesignFloatingHintComboBox}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Converter={StaticResource LocalizationConverter}}" />
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <Grid Grid.Column="8" Visibility="{Binding IsRoleSearchFilterType, Converter={StaticResource BooleanToVisibilityConverter}}">
                <ComboBox
                    Width="100"
                    Margin="0,3,0,0"
                    MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.UserRole}"
                    ItemsSource="{Binding UserRoleSearchFilters}"
                    SelectedItem="{Binding SelectedUserRoleSearchFilter}"
                    Style="{StaticResource MaterialDesignFloatingHintComboBox}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource LocalizationConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </Grid>

            <Grid Grid.Column="8" Visibility="{Binding IsWatchTimeSearchFilterType, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="5" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <ComboBox
                    Grid.Column="0"
                    Margin="0,15,0,0"
                    ItemsSource="{Binding WatchTimeComparisonSearchFilters}"
                    SelectedItem="{Binding SelectedWatchTimeComparisonSearchFilter}" />

                <TextBox
                    Grid.Column="2"
                    Width="100"
                    MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.Minutes}"
                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                    Text="{Binding WatchTimeAmountSearchFilter}" />
            </Grid>

            <Grid Grid.Column="8" Visibility="{Binding IsConsumablesSearchFilterType, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="5" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="5" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <ComboBox
                    Grid.Column="0"
                    Width="115"
                    Margin="0,3,0,0"
                    MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.Consumables}"
                    DisplayMemberPath="Name"
                    ItemsSource="{Binding ConsumablesSearchFilters}"
                    SelectedItem="{Binding SelectedConsumablesSearchFilter}"
                    Style="{StaticResource MaterialDesignFloatingHintComboBox}" />
                <ComboBox
                    Grid.Column="1"
                    Width="100"
                    Margin="5,3,0,0"
                    MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.Item}"
                    DisplayMemberPath="Name"
                    ItemsSource="{Binding ConsumablesItemsSearchFilters}"
                    SelectedItem="{Binding SelectedConsumablesItemsSearchFilter}"
                    Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                    Visibility="{Binding IsConsumablesSearchFilterInventory, Converter={StaticResource BooleanToVisibilityConverter}}" />

                <ComboBox
                    Grid.Column="3"
                    Margin="0,15,0,0"
                    ItemsSource="{Binding ConsumablesComparisonSearchFilters}"
                    SelectedItem="{Binding SelectedConsumablesComparisonSearchFilter}" />

                <TextBox
                    Grid.Column="5"
                    Width="70"
                    MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.Amount}"
                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                    Text="{Binding ConsumablesAmountSearchFilter}" />
            </Grid>

            <Grid Grid.Column="8" Visibility="{Binding IsLastSeenSearchFilterType, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="5" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <ComboBox
                    Grid.Column="0"
                    Margin="0,15,0,0"
                    ItemsSource="{Binding LastSeenComparisonSearchFilters}"
                    SelectedItem="{Binding SelectedLastSeenComparisonSearchFilter}" />

                <TextBox
                    Grid.Column="2"
                    Width="100"
                    MaterialDesign:HintAssist.Hint="{x:Static resx:Resources.TimeDays}"
                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                    Text="{Binding LastSeenAmountSearchFilter}" />
            </Grid>

            <Controls:IconButton
                x:Name="FilterUsersButton"
                Grid.Column="10"
                Margin="0,10,0,0"
                VerticalAlignment="Center"
                Click="FilterUsersButton_Click"
                Icon="Search"
                ToolTip="{x:Static resx:Resources.Filter}" />
        </Grid>

        <Grid Grid.Row="2" Margin="10,0">
            <Border Style="{StaticResource DefaultBorder}">
                <Controls:SortedDataGrid
                    x:Name="UserDataGridView"
                    Grid.Row="1"
                    HorizontalContentAlignment="Center"
                    CellStyle="{StaticResource StandardDataGridCell}"
                    EnableRowVirtualization="True"
                    ItemsSource="{Binding Users}"
                    Sorted="UserDataGridView_Sorted"
                    Style="{StaticResource StandardDataGrid}">
                    <Controls:SortedDataGrid.Columns>
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding Username}"
                            Header="{x:Static resx:Resources.Username}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            Width="100"
                            Binding="{Binding Platform, Converter={StaticResource LocalizationConverter}}"
                            Header="{x:Static resx:Resources.Platform}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            Width="100"
                            Binding="{Binding PrimaryRole, Converter={StaticResource LocalizationConverter}}"
                            IsReadOnly="True">
                            <DataGridTextColumn.Header>
                                <Grid Margin="0,0,0,0" HorizontalAlignment="Center">
                                    <MaterialDesign:PackIcon
                                        Width="24"
                                        Height="24"
                                        Kind="AccountKey"
                                        Style="{StaticResource DarkLightBackgroundPackIcon}" />
                                </Grid>
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        <DataGridTextColumn
                            Width="80"
                            Binding="{Binding OnlineViewingMinutes}"
                            IsReadOnly="True">
                            <DataGridTextColumn.Header>
                                <Grid Margin="0,0,0,0" HorizontalAlignment="Center">
                                    <MaterialDesign:PackIcon
                                        Width="24"
                                        Height="24"
                                        Kind="Clock"
                                        Style="{StaticResource DarkLightBackgroundPackIcon}" />
                                </Grid>
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        <DataGridTextColumn
                            Width="80"
                            Binding="{Binding PrimaryCurrency}"
                            IsReadOnly="True">
                            <DataGridTextColumn.Header>
                                <Grid Margin="0,0,0,0" HorizontalAlignment="Center">
                                    <MaterialDesign:PackIcon
                                        Width="24"
                                        Height="24"
                                        Kind="Cash100"
                                        Style="{StaticResource DarkLightBackgroundPackIcon}" />
                                </Grid>
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        <DataGridTextColumn
                            Width="80"
                            Binding="{Binding PrimaryRankPoints}"
                            IsReadOnly="True">
                            <DataGridTextColumn.Header>
                                <Grid Margin="0,0,0,0" HorizontalAlignment="Center">
                                    <MaterialDesign:PackIcon
                                        Width="24"
                                        Height="24"
                                        Kind="ShieldStar"
                                        Style="{StaticResource DarkLightBackgroundPackIcon}" />
                                </Grid>
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        <DataGridTemplateColumn Width="130" Header="{x:Static resx:Resources.Actions}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="10" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Controls:IconButton
                                            x:Name="UserEditButton"
                                            Grid.Column="0"
                                            HorizontalAlignment="Center"
                                            Click="UserEditButton_Click"
                                            Icon="TooltipEdit"
                                            ToolTip="{x:Static resx:Resources.Edit}" />

                                        <Controls:IconButton
                                            x:Name="UserDeleteButton"
                                            Grid.Column="2"
                                            HorizontalAlignment="Center"
                                            Click="UserDeleteButton_Click"
                                            Icon="Delete"
                                            ToolTip="{x:Static resx:Resources.Delete}" />
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </Controls:SortedDataGrid.Columns>
                </Controls:SortedDataGrid>
            </Border>
        </Grid>

        <Grid
            Grid.Row="2"
            Margin="10,0"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="10" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <ProgressBar
                Grid.Row="0"
                Margin="12,12,12,12"
                IsIndeterminate="True"
                Style="{StaticResource MaterialDesignCircularProgressBar}"
                Value="0" />

            <TextBlock Grid.Row="2" Text="{x:Static resx:Resources.UsersLoadingData}" />
        </Grid>

        <Grid Grid.Row="4" HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button
                x:Name="ImportUserDataButton"
                Grid.Column="0"
                MinWidth="120"
                Click="ImportUserDataButton_Click"
                Content="{x:Static resx:Resources.ImportData}" />

            <Button
                Grid.Column="2"
                MinWidth="120"
                Command="{Binding ExportDataCommand}"
                Content="{x:Static resx:Resources.ExportData}" />

            <Button
                x:Name="AddUserDataButton"
                Grid.Column="4"
                MinWidth="120"
                Click="AddUserDataButton_Click"
                Content="{x:Static resx:Resources.AddUser}" />
        </Grid>
    </Grid>
</local:MainControlBase>